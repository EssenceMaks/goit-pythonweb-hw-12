{% extends "base.html" %}
{% block title %}Скидання пароля{% endblock %}

{% block content %}
<div class="glass-container">
    <form method="post" action="/reset/{{ reset_token }}">
        <h2>Встановлення нового пароля</h2>
        
        {% if error %}
            <div class="error-message">{{ error }}</div>
        {% endif %}
        
        {% if expired %}
            <div class="error-message">
                Посилання для скидання пароля закінчилося. 
                <a href="/forgot" class="link">Запросити нове</a>
            </div>
        {% else %}
            <div class="password-wrapper">
                <input type="password" name="password" id="password" placeholder="Новий пароль" required minlength="6">
                <span class="toggle-password" onclick="togglePassword('password')">
                    <svg width="20" height="20" viewBox="0 0 20 20"><path d="M10 3C5 3 1.73 7.11 1 10c.73 2.89 4 7 9 7s8.27-4.11 9-7c-.73-2.89-4-7-9-7zm0 12c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8a3 3 0 100 6 3 3 0 000-6z" fill="#aaa"/></svg>
                </span>
            </div>
            <div class="password-wrapper">
                <input type="password" name="confirm_password" id="confirm_password" placeholder="Підтвердіть новий пароль" required minlength="6">
                <span class="toggle-password" onclick="togglePassword('confirm_password')">
                    <svg width="20" height="20" viewBox="0 0 20 20"><path d="M10 3C5 3 1.73 7.11 1 10c.73 2.89 4 7 9 7s8.27-4.11 9-7c-.73-2.89-4-7-9-7zm0 12c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8a3 3 0 100 6 3 3 0 000-6z" fill="#aaa"/></svg>
                </span>
            </div>
            <button type="submit" class="login-btn">Змінити пароль</button>
        {% endif %}
        
        <div class="login-link"><a href="/login">Повернутися до входу</a></div>
    </form>
</div>

<script>
function togglePassword(id) {
    const input = document.getElementById(id);
    if (input.type === 'password') {
        input.type = 'text';
    } else {
        input.type = 'password';
    }
}
</script>
{% endblock %}